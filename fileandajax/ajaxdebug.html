<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Document</title>
        <style>
            * {
                margin:0px;
                padding:0px;
                box-sizing: border-box;
            }
    
            body, input, select, button, textarea {
                font-size: 14px;
                font-family: 'Microsoft YaHei',Tahoma, Geneva, sans-serif;
            }
            
            button {
                border-width: 0px;
                outline: none;
            }            
            
            body, html {
                width:100%;
                height:100%;
            }  

            .leftContent {
                width:50%;
                height:100%;

                display: inline-block;
            }   

            .rightContent  {
                width:50%; 
                height:100%;
                display: inline-block;            
            } 

            .container{
                width:100%;
                height:100%;
                font-size: 0px;
                background: #ADC0B4;
            }              
        </style>
    </head>
    <body>
      <div class="container">
        
      </div>
    </body>
    
    <!-- <script src="../js/common/jquery-1.11.2.js" type="text/javascript"></script> -->
    <!-- <script src="../js/common/xmlHttpRequestRemould.js" type="text/javascript"></script> -->
<!--     <script src="../lib/requirejs/require.js" type="text/javascript"></script>
    <script src="../js/common/requireconfig.js" type="text/javascript"></script> -->
    
    <script type="text/javascript">
    // require.config({
    //     paths: {
    //         "othertestmodule": '../js/fileandajax/othertestmodule',
    //         "filemodule": "../js/fileandajax/filemodule",
    //         "peity": '../lib/peity-master/jquery.peity',
    //         "schememodule": '../js/module/schememodule',
    //     },
    //     shim: {
    //         "peity": {
    //             deps: ["jquery"],
    //             exports: "peity"
    //         }
    //     }
    // })

    // require(["common", "othertestmodule", "filemodule", "constant", "schememodule","ajax", "jquery", "underscore"], function(common, othertestmodule, filemodule, constant, schememodule, ajax) {

        // xmlHttpRequestRemould.setFnBeforeOpen(function(para, that){
        //     var startTime = new Date().getTime();
        //     that.startTime = startTime;
        //     console.log("this is before");
        // });

        // xmlHttpRequestRemould.setFnAfterDataReturn(function(that){
        //     console.log("url is " + that.responseURL + " span time is " + (new Date().getTime() - that.startTime)); 
        // });

    //     $.ajax({
    //         url: "http://" + document.domain  + ":8088/delayloadtest",
    //         type: 'post',
    //         async : true,
    //         datatype: "json",
    //         contentType:"application/json",
    //         data:JSON.stringify({para0:1000})
    //         // ,
    //         // success:function(data) {
    //         //     console.log(data);
    //         // },
    //         // error:function(data) {
    //         //     console.error(arguments);
    //         // }
    //     })
    //     .then(function(data){
    //         console.log("ajax " + data);
    //     }, function(data){
    //         console.error(arguments);
    //     })


    //     // var option = {
    //     //     url:"http://" + document.domain  + ":8088/delayloadtest",
    //     //     data:{para0:1000},
    //     //     success:function(result) {
    //     //         console.log("self ajax " + result);
    //     //     }
    //     //     ,error:function(readyState, status) {
    //     //         console.error(readyState + " " + status);
    //     //     }
    //     // }   

    //     // ajax.generalAjax(option);
   
        
    //     // var oldThen = Promise.prototype.then;

    //     // function action() {
    //     //     console.log("thnis is apply before then");
    //     // }

    //     // function newThen() {
    //     //     action();
    //     //     return oldThen.apply(this, arguments);
    //     // }

    //     // Promise.prototype.then = newThen;

    //     // fetch("http://" + document.domain  + ":8088/delayloadtest?para0=1000", { method: 'get' })
    //     // .then(function(response) {
    //     //     console.log("this is response");
    //     //     return response.text()
    //     //  })
    //     // .then(function(result) {
    //     //     console.log("this is result");
    //     //     console.log(result);
    //     // })
    //     // .catch(function(err) {
    //     //     console.log(err);
    //     //  });
    // })
    
    
    // $(function(){
    //     xmlHttpRequestRemould.setFnBeforeOpen(function(para, that){
    //         var startTime = new Date().getTime();
    //         that.startTime = startTime;
    //         console.log("this is before");
    //     });

    //     xmlHttpRequestRemould.setFnAfterDataReturn(function(that){
    //         console.log("url is " + that.responseURL + " span time is " + (new Date().getTime() - that.startTime)); 
    //     });
    //     $.ajax({
    //         url: "http://" + document.domain  + ":8088/delayloadtest",
    //         type: 'post',
    //         async : true,
    //         datatype: "json",
    //         contentType:"application/json",
    //         data:JSON.stringify({para0:1000})
    //         ,
    //         success:function(data) {
    //             console.log(data);
    //         }
    //         // ,
    //         // error:function(data) {
    //         //     console.error(arguments);
    //         // }
    //     })      
    // })

    // xmlHttpRequestRemould.setFnBeforeDataReturn(function(){
    //     console.log("before");
    // });

    // xmlHttpRequestRemould.setFnAfterDataReturn(function(){
    //     console.log("after");
    // });
    
    // XMLHttpRequest.prototype.onload = function(){};
    
    var tmp = Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype, 'onreadystatechange');
    var xhr = new XMLHttpRequest();
    xhr.open("get", "http://" + document.domain  + ":8088/delayloadtest" + "?para0=1000");
    xhr.send(null);
    // Object.defineProperty(xhr, "onreadystatechange", {
    //     get:function() {
    //         console.log("before get")
    //         return tmp.get.call(this);
    //     },
    //     set:function(value) {
    //         var test =  function() {
    //             if (this.readyState.toString() == "4" && this.status.toString() == "200") {
    //                 console.log("before")
    //                 value()
    //                 console.log("after")        
    //             }                 
    //         }
    //         tmp.set.call(this,test);   
    //     }
    // }) 

    // Object.defineProperty(xhr, "onload", {
    //     get:function() {
    //         return true;
    //     },
    //     set:function(value) {
    //         console.log(this.status);
    //         // console.log("before set")
    //         // value();
    //         // onload = value;
    //         debugger;
    //         this.onload = value
    //     }
    // }) 
    
    // xhr.onreadystatechange = function() {
    //     if (xhr.readyState.toString() == "4" && xhr.status.toString() == "200") {
    //         console.log(xhr.response);
    //     } 
    // } 
    // 
    xhr.onload = function() {
        console.log(xhr.response);
    }

    // debugger

    var xmlprototype = XMLHttpRequest.prototype

    for(var i in xmlprototype) {

        console.log(i.toString());
        console.log(Object.getOwnPropertyDescriptor(xmlprototype, i.toString()));

    }
    // Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype, "onload");

    // var xhr2 = new XMLHttpRequest();
    // xhr2.open("get", "http://" + document.domain  + ":8088/getClientIPAdress");
    // xhr2.send(null);
    // xhr2.onreadystatechange = function() {
    //     if (xhr2.readyState.toString() == "4" && xhr2.status.toString() == "200") {
    //         console.log(xhr2.response);
    //     } 
    // }

    
    // var testObj = {hh:"test"};
    // console.log(testObj.hh);
    // Object.defineProperty(testObj, "hh", {
    //     get:function() {
    //         console.log("get");
    //         return hh;
    //     },
    //     set:function(value) {
    //         console.log("set");
    //         this._hh = value;
    //     }
    // })
    // // testObj.hh = function() {
    // //     console.log("this is hh");
    // // }
    // // testObj.hh();
    // console.log(testObj.hh);
    

    // function TestFn() {
    //     this.name = "test";
    // }

    // TestFn.prototype.proTestFn = function() {
    //     console.log(this.name);
    // }

    // var testFn = new TestFn();

    // Object.defineProperty(TestFn.prototype, "proTestFn", {
    //     get:function() {
    //         console.log("get");
    //         console.log(this);
    //         return proTestFn;
    //     },
    //     set:function(value) {
    //         console.log("set");
    //         console.log(this);
    //         proTestFn = value;
    //     }
    // }) 
    
    // testFn.proTestFn();  
    // 

    // function Archiver() {
    //   var temperature = null;
    //   var archive = [];

    //   Object.defineProperty(this, 'temperature', {
    //     get: function() {
    //       console.log('get!');
    //       return temperature;
    //     },
    //     set: function(value) {
    //       temperature = value;
    //       archive.push({ val: temperature });
    //     }
    //   });

    //   this.getArchive = function() { return archive; };
    // }


    // var arc = {};
   
    // Object.defineProperty(arc, 'temperature', {
    //   get: function() {
    //     console.log('get!');
    //     // return (temperature === void 0 ? 0 : temperature);
    //     return temperature;
    //   },
    //   set: function(value) {
    //     temperature = value;
    //   }
    // }); 
    // arc.temperature = null;   
    // arc.temperature; // 'get!'
    // arc.temperature = 11;
    // arc.temperature = 13;

    // var a = { _zhihu:0 };

    // Object.defineProperty(a, 'zhihu', {
    //   get: function() {
    //     console.log('get：' + this._zhihu);
    //     return this._zhihu;
    //   },
    //   set: function(value) {
    //     this._zhihu = value;
    //     console.log('set:' + _zhihu);
    //   }
    // });

    // // a.zhihu = 2; // set:2
    // console.log(a.zhihu);
    
    //  var a = { test:function(){console.log("testf")}};
    // var tmpDescriptor = Object.getOwnPropertyDescriptor(a, "test");
    // // debugger
    // // Object.defineProperty(a, 'test', {
    // //   get: function() {
    // //     console.log('get');
    // //     return test;
    // //   },
    // //   set: function(value) {
    // //     console.log('set');
    // //     test = value;
    // //   }
    // // });
    
    // a.test = "ttt";
    // // a.test = 2; // set:2
    // console.log(a.test);


    </script>
</html>