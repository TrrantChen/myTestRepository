<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Document</title>
        <style type="text/css">
            * {
                margin:0px;
                padding:0px;
                box-sizing: border-box;
            }
    
            body, input, select, button, textarea {
                font-size: 14px;
                font-family: 'Microsoft YaHei',Tahoma, Geneva, sans-serif;
            }
            
            button {
                border-width: 0px;
                outline: none;
            }            
            
            body, html {
                width:100%;
                height:100%;
            }   

            .container {
                width:100%;
                height:150%;
                background: #F5ECB7;
                position: relative;
                left: 0;
                top:0;
            }   

            .testDivStyle {
                width:100px;
                height:100px;
                background: #2E0D23;
                position: relative;
                left:100px;
                /*margin-left: 100px; */
                /*padding: 100px;*/
                border: solid 10px #6BACBF;
                /*transform: translate(10px, 10px);*/
            }  

            .positionParentDivStyle {
                position:relative;
                background: #FFB238;
                left:100px;
            }   

            .testDivByJqueryuiStyle {
                width:100px;
                height:100px;
                background: #E7EDEA;
            } 

        </style>
    </head>
    <body>
        <div class="container">
            <!-- <p>dsdjklsdjklsssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss</p> -->
            <!-- <div id="positionParentDiv" class="positionParentDivStyle"> -->
                <div id="testDiv" class="testDivStyle">
                    
                </div>                
            <!-- </div> -->
            <div id="testDivByJqueryui" class="testDivByJqueryuiStyle">
                
            </div>
        </div>
    </body>
    <script src="../lib/requirejs/require.js" type="text/javascript"></script>
    <script src="../js/common/requireconfig.js" type="text/javascript"></script>
    <script type="text/javascript">
        require.config({
            paths: {
                "jqueryui": '../lib/jquery-ui-1.12.1.custom/jquery-ui'
            },
            shim: {
                "jqueryui": {
                    deps: ["jquery"],
                    exports: "jqueryui"
                }
            }
        })
        require(["common", "othertestmodule", "filemodule", "constant", "schememodule","ajax", "ajaxtestmodule", "jqueryui", "jquery", "underscore"], function(common, othertestmodule, filemodule, constant, schememodule, ajax, ajaxtestmodule){         
            function xyTest() {      
                document.body.addEventListener("mousemove", function(event){
                    console.log("body client " + event.clientX + " " + event.clientY);
                    console.log("body  page " + event.pageX + " " + event.pageY);
                    console.log("body  screen " + event.screenX + " " + event.screenY);
                }) 

                document.querySelector("#testDiv").addEventListener("mousemove", function(event){
                    console.log("testDiv client " + event.clientX + " " + event.clientY);
                    console.log("testDiv offset " + event.offsetX + " " + event.offsetY);
                    console.log("testDiv layer " + event.layerX + " " + event.layerY);
                })                           
            }
            
            function dragTestByJquery(){
                let testDiv = $("#testDiv"),
                    mouseStartPosition = {x:0, y:0};
                testDiv.on("mousedown", mouseDownHandle);
                function mouseDownHandle(event) {                 
                    mouseStartPosition.x = event.offsetX;
                    mouseStartPosition.y = event.offsetY;
                    testDiv.css("cursor", "move");
                    testDiv.css("position", "relative");
                    document.addEventListener("mousemove", mouseMoveHandle);
                    document.addEventListener("mouseup", mouseUpHandle);
                }

                function mouseMoveHandle(event) {
                    testDiv.css("left", event.pageX - mouseStartPosition.x);
                    testDiv.css("top", event.pageY - mouseStartPosition.y);
                }

                function mouseUpHandle(event) {                
                    testDiv.css("cursor", "default");
                    document.removeEventListener("mousemove", mouseMoveHandle);
                    document.removeEventListener("mouseup", mouseUpHandle);
                }
            }

            function dragTestOrigin(id) {
                let regExp = /^#\w?/;
                id = regExp.test(id) ? id : "#" + id
                let ele = document.querySelector(id),
                    mouseStartOffset = {x:0, y:0};
                ele.addEventListener("mousedown", mouseDownHandle);

                function mouseDownHandle(event) {
                    mouseStartOffset.x = event.offsetX;
                    mouseStartOffset.y = event.offsetY;
                    ele.style.cursor = "move";
                    // ele.style.position = "relative";
                    document.addEventListener("mousemove", mouseMoveHandle);
                    document.addEventListener("mouseup", mouseUpHandle);
                }

                function mouseMoveHandle(event) {
                    ele.style.left = event.pageX - mouseStartOffset.x + "px";
                    ele.style.top = event.pageY - mouseStartOffset.y + "px";
                }

                function mouseUpHandle(event) {
                    ele.style.cursor = "default";
                    document.removeEventListener("mousemove", mouseMoveHandle);
                    document.removeEventListener("mouseup", mouseUpHandle);                    
                }
            }

            function dragByJqueryUi() {
                var testDivByJqueryui = $("#testDivByJqueryui");
                testDivByJqueryui.draggable();
            }



            // dragTestByJquery();
            // dragByJqueryUi();
            // dragTestOrigin();
            dragTestOrigin("testDiv");
        })
    </script>    
</html>

