<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
        <input id="robotUrl" style="width:100%" type="text" value="https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=8289f3ee-e23c-49d4-8e1e-ce6a0fc47e79"/>
        <textarea id="msg" style="width:100%;height:200px;" value="我是机器人好不"></textarea>
        <button style="display:flex;margin:30px auto;" id="btnSend">发送</button>
        <script
                src="https://code.jquery.com/jquery-3.4.1.js"
                integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
                crossorigin="anonymous">
        </script>
        <script src="./axios.js"></script>
        <script>
            //关注微信公众号 技术岛Jishudao 体验最新的技术潮流，获取更多实用小工具
            // 微信 13439975582
            $(function(){
                $("#btnSend").click(function(){
                    var botData = {
                        "msgtype": "text",
                        "text": {
                            "content": $("#msg").val()
                        }
                    };

                    let url = $("#robotUrl").val();

                    $.ajax({
                        url: url,
                        type: 'post',
                        dataType: 'json',
                        data: JSON.stringify(botData),
                        success: function(res){
                            console.log(res)
                            if (res.code === 200) {

                            }
                        },
                        error: function(e) {

                        }
                    });

                    // let url = 'https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=8289f3ee-e23c-49d4-8e1e-ce6a0fc47e79';
                    //
                    // const options = {
                    //     method: 'POST',
                    //     headers: { 'content-type': 'application/json' },
                    //     data: JSON.stringify(botData),
                    //     url,
                    // };
                    //
                    // axios(options)
                    // .then(function (response) {
                    //     console.log('success');
                    //     // console.log(response);
                    // })
                    // .catch(function (error) {
                    //     console.log('error');
                    //     // console.log(error);
                    // });
                });
            });
        </script>
    </body>
</html>
