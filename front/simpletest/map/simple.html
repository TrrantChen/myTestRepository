<!DOCTYPE html>
<html lang="en">
<head>


    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        html, body {
            width: 100%;
            height: 100%;
        }

        * {
            margin: 0;
            padding: 0;
        }

        .container {
            width: 100%;
            height: 50%;
        }

    </style>
</head>
<body>
    <div id="main" class="container">

    </div>
    <div id="main2" class="container">

    </div>
</body>
<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.14&key=938f26de61c40ad5f7d354e5559e130c"></script>
<script type="text/javascript" src="../echarts.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/104/three.js"></script>
<script type="module" src="../util.js"></script>
<script type="module">
    import { isCyclic } from '../util.js';

    let map = new AMap.Map('main', {
        resizeEnable: true, //是否监控地图容器尺寸变化
        zoom:16, //初始化地图层级
        center: [113.390601,23.065365] //初始化地图中心点
    });

    let str = '113.394604,23.064532_113.394685,23.064243_113.394709,23.064186_113.394572,23.064213_113.39437,23.064261_113.393931,23.06432_113.393742,23.064344_113.393587,23.064366_113.393511,23.06437_113.393185,23.064386_113.393163,23.064386_113.393042,23.064385_113.392906,23.064384_113.392621,23.064378_113.392452,23.064363_113.392241,23.064336_113.392086,23.064308_113.391922,23.064278_113.391778,23.064245_113.391623,23.064206_113.391284,23.064111_113.391068,23.064037_113.391184,23.063477_113.39119,23.06343_113.39123,23.062945_113.391313,23.062146_113.391371,23.061529_113.391446,23.060673_113.391485,23.060332_113.391872,23.0604_113.392277,23.06045_113.392918,23.060509_113.392968,23.060514_113.392977,23.06043_113.393015,23.059995_113.39302,23.059947_113.39306,23.059527_113.393104,23.059083_113.393181,23.058266_113.393207,23.057979_113.393224,23.057846_113.393149,23.05784_113.393056,23.05783_113.392517,23.057765_113.392402,23.057742_113.392051,23.057672_113.391947,23.057646_113.391772,23.057595_113.391678,23.057566_113.391526,23.057513_113.391467,23.057487_113.391323,23.05743_113.391021,23.057296_113.390758,23.057172_113.390682,23.057127_113.390556,23.057234_113.390503,23.057278_113.390453,23.057322_113.390133,23.057638_113.389838,23.057929_113.38891,23.058858_113.388563,23.059221_113.387198,23.060586_113.386757,23.061017_113.385678,23.062084_113.385065,23.06269_113.384062,23.063683_113.383944,23.063793_113.384003,23.063878_113.384158,23.064099_113.384313,23.064332_113.384376,23.064424_113.38458,23.064765_113.38481,23.065161_113.385179,23.06585_113.385562,23.066483_113.385698,23.066705_113.385735,23.066758_113.385828,23.0669_113.386079,23.067241_113.386298,23.067546_113.386376,23.067645_113.386456,23.067735_113.386844,23.068131_113.386974,23.06827_113.387153,23.068442_113.387493,23.068743_113.387703,23.068914_113.387904,23.06906_113.388043,23.06916_113.38849,23.069448_113.388799,23.069654_113.389069,23.069826_113.389181,23.069897_113.389691,23.070215_113.390118,23.07048_113.390364,23.070634_113.390823,23.070933_113.391353,23.071255_113.391497,23.071332_113.391634,23.071404_113.392022,23.071614_113.392155,23.071685_113.392257,23.071727_113.392437,23.071835_113.392704,23.071958_113.393125,23.072072_113.393386,23.072132_113.393632,23.072173_113.393873,23.072196_113.393913,23.072198_113.394128,23.072204_113.39436,23.072208_113.394401,23.072207_113.394586,23.072205_113.394805,23.072193_113.395109,23.072155_113.395383,23.072101_113.395632,23.07204_113.395842,23.071975_113.396147,23.071861_113.396353,23.07176_113.396645,23.071619_113.396707,23.071583_113.396786,23.071538_113.396914,23.071459_113.396849,23.07135_113.396404,23.070628_113.396266,23.0704_113.396147,23.070229_113.396041,23.070055_113.395856,23.069759_113.395403,23.069007_113.395357,23.06893_113.395278,23.068794_113.394949,23.068213_113.394826,23.06793_113.394727,23.067679_113.394625,23.067371_113.394554,23.067109_113.394485,23.066778_113.39446,23.066611_113.394439,23.066385_113.394423,23.066156_113.394412,23.065911_113.394424,23.065647_113.394443,23.06543_113.394463,23.065233_113.394518,23.064895_113.394604,23.064532'

    let lst = [113.394604,23.064532,
        113.394685,23.064243,
        113.394709,23.064186,
        113.394572,23.064213,
        113.39437,23.064261,
        113.393931,23.06432,
        113.393742,23.064344,
        113.393587,23.064366,
        113.393511,23.06437,
        113.393185,23.064386,
        113.393163,23.064386,
        113.393042,23.064385,
        113.392906,23.064384,
        113.392621,23.064378,
        113.392452,23.064363,
        113.392241,23.064336,
        113.392086,23.064308,
        113.391922,23.064278,
        113.391778,23.064245,
        113.391623,23.064206,
        113.391284,23.064111,
        113.391068,23.064037,
        113.391184,23.063477,
        113.39119,23.06343,
        113.39123,23.062945,
        113.391313,23.062146,
        113.391371,23.061529,
        113.391446,23.060673,
        113.391485,23.060332,
        113.391872,23.0604,
        113.392277,23.06045,
        113.392918,23.060509,
        113.392968,23.060514,
        113.392977,23.06043,
        113.393015,23.059995,
        113.39302,23.059947,
        113.39306,23.059527,
        113.393104,23.059083,
        113.393181,23.058266,
        113.393207,23.057979,
        113.393224,23.057846,
        113.393149,23.05784,
        113.393056,23.05783,
        113.392517,23.057765,
        113.392402,23.057742,
        113.392051,23.057672,
        113.391947,23.057646,
        113.391772,23.057595,
        113.391678,23.057566,
        113.391526,23.057513,
        113.391467,23.057487,
        113.391323,23.05743,
        113.391021,23.057296,
        113.390758,23.057172,
        113.390682,23.057127,
        113.390556,23.057234,
        113.390503,23.057278,
        113.390453,23.057322,
        113.390133,23.057638,
        113.389838,23.057929,
        113.38891,23.058858,
        113.388563,23.059221,
        113.387198,23.060586,
        113.386757,23.061017,
        113.385678,23.062084,
        113.385065,23.06269,
        113.384062,23.063683,
        113.383944,23.063793,
        113.384003,23.063878,
        113.384158,23.064099,
        113.384313,23.064332,
        113.384376,23.064424,
        113.38458,23.064765,
        113.38481,23.065161,
        113.385179,23.06585,
        113.385562,23.066483,
        113.385698,23.066705,
        113.385735,23.066758,
        113.385828,23.0669,
        113.386079,23.067241,
        113.386298,23.067546,
        113.386376,23.067645,
        113.386456,23.067735,
        113.386844,23.068131,
        113.386974,23.06827,
        113.387153,23.068442,
        113.387493,23.068743,
        113.387703,23.068914,
        113.387904,23.06906,
        113.388043,23.06916,
        113.38849,23.069448,
        113.388799,23.069654,
        113.389069,23.069826,
        113.389181,23.069897,
        113.389691,23.070215,
        113.390118,23.07048,
        113.390364,23.070634,
        113.390823,23.070933,
        113.391353,23.071255,
        113.391497,23.071332,
        113.391634,23.071404,
        113.392022,23.071614,
        113.392155,23.071685,
        113.392257,23.071727,
        113.392437,23.071835,
        113.392704,23.071958,
        113.393125,23.072072,
        113.393386,23.072132,
        113.393632,23.072173,
        113.393873,23.072196,
        113.393913,23.072198,
        113.394128,23.072204,
        113.39436,23.072208,
        113.394401,23.072207,
        113.394586,23.072205,
        113.394805,23.072193,
        113.395109,23.072155,
        113.395383,23.072101,
        113.395632,23.07204,
        113.395842,23.071975,
        113.396147,23.071861,
        113.396353,23.07176,
        113.396645,23.071619,
        113.396707,23.071583,
        113.396786,23.071538,
        113.396914,23.071459,
        113.396849,23.07135,
        113.396404,23.070628,
        113.396266,23.0704,
        113.396147,23.070229,
        113.396041,23.070055,
        113.395856,23.069759,
        113.395403,23.069007,
        113.395357,23.06893,
        113.395278,23.068794,
        113.394949,23.068213,
        113.394826,23.06793,
        113.394727,23.067679,
        113.394625,23.067371,
        113.394554,23.067109,
        113.394485,23.066778,
        113.39446,23.066611,
        113.394439,23.066385,
        113.394423,23.066156,
        113.394412,23.065911,
        113.394424,23.065647,
        113.394443,23.06543,
        113.394463,23.065233,
        113.394518,23.064895,
        113.394604,23.064532];

    function useMapAPI() {
        let path = [];

        for (var i = 0; i < lst.length; i++) {
            if (i % 2 !== 0) {
                let a_map = new AMap.LngLat(lst[i - 1], lst[i]);
                path.push(a_map);
            }
        }

        let polygon = new AMap.Polygon({
            path: path,
            fillColor: '#111', // 多边形填充颜色
            borderWeight: 2, // 线条宽度，默认为 1
            strokeColor: 'green', // 线条颜色
        });

        map.add(polygon);
    }

    function useCanvas() {
        let canvas = document.createElement('canvas');
        canvas.width = canvas.height = 200;

        let context = canvas.getContext('2d');
        context.fillStyle = 'rgb(0,100,255)';
        context.strokeStyle = 'white';
        context.globalAlpha = 1;
        context.lineWidth = 2;
        context.beginPath();
        context.arc(100, 100, 100, 0, 2 * Math.PI);
        context.fill();
        context.stroke();

        let CanvasLayer = new AMap.CanvasLayer({
            canvas: canvas,
            bounds: new AMap.Bounds(
                [113.390601,23.065365],
                [113.390602,23.065366]
            ),
            zooms: [3, 18],
        });

        CanvasLayer.setMap(map);


    }

    useMapAPI();

    isCyclic(THREE);

    // var map = new AMap.Map('container', {
    //     resizeEnable: true,
    //     // viewMode:"3D",
    //     zoom: 15,
    //     center: [116.335183, 39.941735]
    // });
    //
    //
    // /*
    //  * 添加Canvas图层
    //  */
    // var canvas = document.createElement('canvas');
    // canvas.width = canvas.height = 200;
    //
    // var context = canvas.getContext('2d')
    // context.fillStyle = 'rgb(0,100,255)';
    // context.strokeStyle = 'white';
    // context.globalAlpha = 1;
    // context.lineWidth = 2;
    //
    // var radious = 0;
    // var draw = function () {
    //     context.clearRect(0, 0, 200, 200)
    //     context.globalAlpha = (context.globalAlpha - 0.01 + 1) % 1;
    //     radious = (radious + 1) % 100;
    //
    //     context.beginPath();
    //     context.arc(100, 100, radious, 0, 2 * Math.PI);
    //     context.fill();
    //     context.stroke();
    //
    //     //2D视图时可以省略
    //     CanvasLayer.reFresh();
    //
    //     AMap.Util.requestAnimFrame(draw);
    // };
    //
    // var CanvasLayer = new AMap.CanvasLayer({
    //     canvas: canvas,
    //     bounds: new AMap.Bounds(
    //         [116.328911, 39.937229],
    //         [116.342659, 39.946275]
    //     ),
    //     zooms: [3, 18],
    // });
    //
    // CanvasLayer.setMap(map);
    // draw();
</script>
<!--<script>-->
    <!--var map = new AMap.Map('main', {-->
        <!--resizeEnable: true,-->
        <!--// viewMode:"3D",-->
        <!--zoom: 15,-->
        <!--center: [116.335183, 39.941735]-->
    <!--});-->

    <!--/*-->
     <!--* 添加Canvas图层-->
     <!--*/-->
    <!--var canvas = document.createElement('canvas');-->
    <!--canvas.width = canvas.height = 200;-->

    <!--var context = canvas.getContext('2d');-->
    <!--context.fillStyle = 'rgb(0,100,255)';-->
    <!--context.strokeStyle = 'white';-->
    <!--context.globalAlpha = 1;-->
    <!--context.lineWidth = 2;-->

    <!--var draw = function () {-->
        <!--context.beginPath();-->
        <!--context.arc(100, 100, 10, 0, 2 * Math.PI);-->
        <!--context.fill();-->

        <!--//2D视图时可以省略-->
        <!--CanvasLayer.reFresh();-->
    <!--};-->

    <!--var CanvasLayer = new AMap.CanvasLayer({-->
        <!--canvas: canvas,-->
        <!--bounds: new AMap.Bounds(-->
            <!--[116.328911, 39.937229],-->
            <!--[116.342659, 39.946275]-->
                <!--// [116.335183, 39.941735]-->
        <!--),-->
    <!--});-->

    <!--CanvasLayer.setMap(map);-->
    <!--draw();-->

<!--</script>-->
</html>
