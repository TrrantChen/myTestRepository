<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script>
    function simpleTest() {
        let origin = {};
        let handler = {
            get: function(target, name, receiver) {

                if (name === 'yc') {
                    console.log('this is yc');
                }
                else {
                    console.log('this is get test');
                }

                console.log(receiver === proxy);

                return Reflect.get(target, name, receiver);
            }
        };
        let proxy = new Proxy(origin, handler);

        proxy.num = 1;
        proxy.yc = 'test';
        console.log(proxy.num);
        console.log(proxy.yc);
    }

    function getTest1() {
        let pipe =  function(value) {
            let funcStack = [];
            let proxy = new Proxy({}, {
                get: function(pipeObject, fnName) {
                    if (fnName === 'get') {
                        return funcStack.reduce(function(val, fn) {
                            return fn(val);
                        }, value);
                    }

                    funcStack.push(fn_obj[fnName]);
                    return proxy;
                }
            });

            return proxy;
        };

        let fn_obj ={
            double: function(n) {
                return n * 2;
            },
            pow: function(n) {
                return n * n;
            },
            reverseInt: function(n) {
                return n.toString().split("").reverse().join("") | 0;
            }
        };

        console.log(pipe(3).double.pow.reverseInt.get);
    }

    function getTest2() {

    }

    getTest1();

</script>
</html>
