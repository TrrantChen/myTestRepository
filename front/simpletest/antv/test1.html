<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
        <style>
            .card-container {
                width: 170px;
                height: 74px;
                border: 1px solid #DBDBDB;
                border-radius: 4px;
                position: relative;
            }
            .ce-button:hover{
                cursor: pointer;
            }
            .card-container .main-text{
                text-align: center;
                margin: 12px 14px;
                padding-bottom: 8px;
                margin-bottom: 0px;
                font-size: 16px;
                border-bottom: 1px solid #DBDBDB;
            }
            .card-container p{
                font-size: 12px;
                margin: 8px;
            }
            .card-container .value-text{
                margin-left: 12px;
                text-align: left;
            }
            .card-container .percent-text{
                margin-right: 12px;
                float: right;
                color: red
            }

            .custom-shape {
                width: 200px;
                height: 40px;
                border: solid 1px black;
                display: flex;
                flex-direction: row;
                justify-content: center;
                align-items: center;
            }

        </style>
    </head>
    <body>
        <div>
            <div id="mountNode">

            </div>
            <button id="query">query</button>
            <button id="addSecond">add second</button>
        </div>
    </body>
    <script src="./g6.js"></script>
    <script src="./plugin.tool.tooltip.js"></script>
    <script>
        // const tooltip = new G6.Plugins['tool.tooltip']({
        //     getTooltip({item}) {
        //         const model = item.getModel();
        //
        //         return '<div>this is ' + model.id + '</div>';
        //     }
        // });
        //
        // G6.registerEdge('smooth', {
        //     getPath(item) {
        //         let points = item.getPoints();
        //         let start = points[0];
        //         let end = points[points.length - 1];
        //         let hgap = Math.abs(end.x - start.x);
        //         if (end.x > start.x) {
        //             return [['M', start.x, start.y], ['C', start.x + hgap / 4, start.y, end.x - hgap / 2, end.y, end.x, end.y]];
        //         }
        //         return [['M', start.x, start.y], ['C', start.x - hgap / 4, start.y, end.x + hgap / 2, end.y, end.x, end.y]];
        //     }
        // });
        //
        // G6.registerNode('customShape', {
        //     draw(item) {
        //         const group = item.getGraphicGroup();
        //         const width = 200;
        //         const height = 100;
        //         const { value, label } = item.getModel();
        //         const html = G6.Util.createDOM(
        //             `
        //                 <div class="custom-shape" style="width: ${ width }px;height: ${ height }px;background: linear-gradient(90deg, red ${ value }%, transparent 0%);" >
        //                     <span>${ label }</span>
        //                 </div>
        //             `
        //         );
        //
        //         const keyShape = group.addShape('dom', {
        //             attrs: {
        //                 x: 0,
        //                 y: 0,
        //                 width,
        //                 height,
        //                 html
        //             }
        //         });
        //
        //         return keyShape;
        //     },
        //     anchor: [
        //         [0, 0.5],
        //         [1, 0.5]
        //     ]
        // });
        //
        // const tree = new G6.Tree({
        //     container: 'mountNode',
        //     height: 500,
        //     renderer: 'svg',
        //     layout: new G6.Layouts.CompactBoxTree({
        //         // direction: 'LR', // 方向（LR/RL/H/TB/BT/V）
        //         getHGap: function getHGap() /* d */ {
        //             // 横向间距
        //             return 20;
        //         },
        //         getVGap: function getVGap() /* d */ {
        //             // 竖向间距
        //             return 20;
        //         },
        //         direction: 'LR',
        //     }),
        //     fitView: 'lc',
        //     plugins: [ tooltip ],
        // });
        //
        //
        // const data2 = {
        //     roots: [
        //         {
        //             id: 'root',                    // 根节点 id
        //             value: 60,
        //             label: 'this is root',
        //             children: [
        //                 {                   // 子元素集 （子元素数据模型和根节点同构）
        //                     id: 'node1',
        //                     parent: 'root',
        //                     edge_value: 'node1 edge',
        //                     value: 40,
        //                     label: 'node1 label',
        //                 },
        //                 {                   // 子元素集 （子元素数据模型和根节点同构）
        //                     id: 'node2',
        //                     parent: 'root',
        //                     edge_value: 'node2 edge',
        //                     value: 20,
        //                     label: 'node2 label',
        //                 }
        //             ],
        //         }
        //     ],
        // };
        //
        // tree.edge({
        //     shape: 'smooth',
        //     label(model) {
        //
        //         const target = tree.find(model.target);
        //         return target.model.edge_value;
        //
        //     },
        //     style() {
        //         return {
        //             endArrow: true
        //         };
        //     },
        //     color: 'red',
        //     size: 2
        // });
        // tree.node({
        //     shape: 'customShape'
        // });
        //
        //
        //
        //
        // let i = 9;
        // let query = document.querySelector('#query');
        // let addSecond = document.querySelector('#addSecond');
        //
        //
        // query.addEventListener('click', () => {
        //     tree.clear();
        //
        //     let data = [
        //         {
        //             id: 'root',
        //             is_loading: true,
        //         },
        //     ];
        //     tree.read(data);
        //
        //     setTimeout(() => {
        //
        //     }, 500);
        // });
        //
        // addSecond.addEventListener('click', () => {
        //     tree.add('node', {
        //         id: 'node' +  (++i),
        //         color: '#333',                 // 颜色
        //         size: [100, 100],          // 尺寸 || [宽, 高]
        //         shape: 'circle',               // 图形
        //         style: {                       // 样式 (优先级高于 color)
        //             fill: 'red',
        //             stroke: 'blue'
        //         },
        //         label: '文本标签' || {           // 文本标签 || 文本图形配置
        //             text: '文本标签',
        //             fill: 'green'
        //         },
        //         collapsed: false,              // 是否折叠
        //         parent: 'node10',
        //         edge_value: '789789',
        //     })
        // });


        G6.registerEdge('horizontal-smooth', {
            getPath(item) {
                var points = item.getPoints();
                var start = points[0];
                var end = points[points.length - 1];
                var hgap = Math.abs(end.x - start.x);
                if (end.x > start.x) {
                    return [['M', start.x, start.y], ['C', start.x + hgap / 4, start.y, end.x - hgap / 2, end.y, end.x, end.y]];
                }
                return [['M', start.x, start.y], ['C', start.x - hgap / 4, start.y, end.x + hgap / 2, end.y, end.x, end.y]];
            }
        });

        const data = {
            nodes: [{
                id: 'node1',
                x: 100,
                y: 200
            },{
                id: 'node2',
                x: 300,
                y: 260
            }],
            edges: [{
                shape: 'horizontal-smooth',
                target: 'node2',
                source: 'node1'
            }]
        };
        const graph = new G6.Graph({
            container: 'mountNode',
            width: 500,
            height: 500
        });
        graph.edge({
            label(model) {
                return model.shape;
            },
            color: 'red',
            size: 2
        });
        graph.read(data);


    </script>
</html>


